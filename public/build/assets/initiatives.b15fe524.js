import{a as d,c as I,e as c,f as u,A as t,E as a,v as x,y as b,g,j as R,G as k,w as S,o as B,m as y,D as L,I as O,U as D,F as j,i as P,s as U,V as N}from"./vue.esm-bundler.b2fc0ee9.js";import{C as A}from"./vue-select.es.7a9c40b5.js";const T={class:"card",style:{"min-width":"325px"}},M={class:"card-body p-4"},q={class:"row"},z={class:"col-12 col-lg-4 border border-top-0 border-left-0 border-bottom-0"},G={class:"font-weight-bold text-deep-green"},H={class:"col-12 col-lg-5"},J=t("h5",{class:"font-weight-bold text-bright-green"},"Current Assessment",-1),K={class:"d-flex justify-content-between"},Q={class:"w-50"},W=t("span",{class:"font-weight-bold text-grey"},"STATUS",-1),X=t("br",null,null,-1),Y={class:"font-weight-bold"},Z={class:"w-50"},tt=t("span",{class:"font-weight-bold text-grey"},"SCORE",-1),et=t("br",null,null,-1),st={key:0,class:"font-xl text-bright-green font-weight-bold"},it={class:"col-12 col-lg-3 d-flex align-items-center justify-content-end"},nt=["href"],at=["data-target"],lt={key:0},ot={class:"row"},dt={class:"col-12 col-lg-4 border border-bottom-0 border-left-0 border-top-0"},ct={class:"d-flex mb-4"},rt={class:"w-50"},ut=t("span",{class:"font-weight-bold text-grey"},"CODE",-1),mt=t("br",null,null,-1),vt={class:"font-weight-bold"},ht=t("span",{class:"font-weight-bold text-grey"},"PORTFOLIO",-1),_t=t("br",null,null,-1),ft={class:"font-weight-bold"},bt=["href"],gt=["href"],wt={class:"col-12 col-lg-6"},pt={class:"d-flex justify-content-between mt-3 w-100"},xt={class:"w-50"},yt=t("span",{class:"font-weight-bold text-grey"},"REDLINES",-1),At=t("br",null,null,-1),Ct={class:"font-weight-bold"},It={class:"w-50"},$t=["href"],St={class:"d-flex justify-content-between mt-3 w-100"},jt={class:"w-50"},Vt=t("span",{class:"font-weight-bold text-grey"},"PRINCIPLES",-1),Et=t("br",null,null,-1),Ft={class:"font-weight-bold"},Rt={class:"w-50"},kt=["href"],Bt={key:0,class:"d-flex justify-content-between mt-3 w-100"},Lt={class:"w-50"},Ot=t("span",{class:"font-weight-bold text-grey"},"ADDITIONAL CRITERIA",-1),Dt=t("br",null,null,-1),Pt={class:"font-weight-bold"},Ut={class:"w-50"},Nt=["href"],Tt={__name:"InitiativeListCard",props:{initiative:Object,hasAdditionalAssessment:Boolean},setup(e){const l=e,m=d(!1);function v(){m.value=!m.value}const o=I(()=>{const h=l.initiative.latest_assessment.redline_status,r=l.initiative.latest_assessment.principle_status,_=l.initiative.latest_assessment.additional_status;return h==="Failed"?null:h!=="Complete"?{label:"Assess Redlines",url:`/admin/assessment/${l.initiative.latest_assessment.id}/redline`}:r!=="Complete"?{label:"Assess Principles",url:`/admin/assessment/${l.initiative.latest_assessment.id}/assess`}:l.hasAdditionalAssessment&&_!=="Complete"?{label:"Assess Additional Criteria",url:`/admin/assessment/${l.initiative.latest_assessment.id}/assess-custom`}:{label:"Show Initiative Information",url:`/admin/project/${l.initiative.id}/show`}});return(h,r)=>(c(),u("div",T,[t("div",M,[t("div",q,[t("div",z,[t("h4",G,a(e.initiative.name.toUpperCase()),1)]),t("div",H,[J,t("div",K,[t("div",Q,[W,X,t("span",Y,a(e.initiative.latest_assessment.assessment_status),1)]),t("div",Z,[tt,et,e.initiative.latest_assessment.overall_score!==null?(c(),u("span",st,a(e.initiative.latest_assessment.overall_score)+"%",1)):x("",!0)])])]),t("div",it,[o.value?(c(),u("a",{key:0,href:o.value.url,class:"btn btn-success mr-2"},a(o.value.label),9,nt)):x("",!0),t("div",{class:"btn btn-info",onClick:v,"data-toggle":"collapse","data-target":".initiative-collapse_"+e.initiative.id},[t("i",{class:b(["la",m.value?"la-caret-down":"la-caret-right"])},null,2)],8,at)])]),g(k,null,{default:R(()=>[m.value?(c(),u("div",lt,[t("div",ot,[t("div",dt,[t("div",ct,[t("div",rt,[ut,mt,t("span",vt,a(e.initiative.code),1)]),t("div",null,[ht,_t,t("span",ft,a(e.initiative.portfolio.name),1)])]),t("a",{class:"btn btn-primary",href:`/admin/project/${e.initiative.id}/edit`},"Edit Initiative Details",8,bt),t("a",{class:"btn btn-success",href:`/admin/project/${e.initiative.id}/show`},"Show Initiative Information",8,gt)]),t("div",wt,[t("div",pt,[t("div",xt,[yt,At,t("span",Ct,a(e.initiative.latest_assessment.redline_status),1)]),t("div",It,[t("a",{href:`/admin/assessment/${e.initiative.latest_assessment.id}/redline`,class:b(["btn text-light w-100",e.initiative.latest_assessment.redline_status==="Complete"?"btn-info":"btn-success"])},a(e.initiative.latest_assessment.redline_status==="Complete"?"Edit Redline Assessment":"Assess Redlines"),11,$t)])]),t("div",St,[t("div",jt,[Vt,Et,t("span",Ft,a(e.initiative.latest_assessment.principle_status),1)]),t("div",Rt,[t("a",{href:`/admin/assessment/${e.initiative.latest_assessment.id}/assess`,class:b(["btn text-light w-100",e.initiative.latest_assessment.redline_status==="Complete"?e.initiative.latest_assessment.principle_status==="Complete"?"btn-info":"btn-success":"btn-info disabled"])},a(e.initiative.latest_assessment.principle_status==="Complete"?"Edit Principle Assessment":"Assess Redlines"),11,kt)])]),e.hasAdditionalAssessment?(c(),u("div",Bt,[t("div",Lt,[Ot,Dt,t("span",Pt,a(e.initiative.latest_assessment.additional_status),1)]),t("div",Ut,[t("a",{href:`/admin/assessment/${e.initiative.latest_assessment.id}/assess-custom`,class:b(["btn text-light w-100",e.initiative.latest_assessment.redline_status==="Complete"?e.initiative.latest_assessment.additional_status==="Complete"?"btn-info":"btn-success":"btn-info disabled"])},a(e.initiative.latest_assessment.additional_status==="Complete"?"Edit Additional Criteria Assessment":"Assess Additional Criteria"),11,Nt)])])):x("",!0)])])])):x("",!0)]),_:1})])]))}},Mt={class:"d-flex justify-content-between align-items-center mb-4"},qt={class:"font-weight-bold text-deep-green my-0"},zt={class:"d-flex justify-content-between flex-column flex-lg-row"},Gt={class:"d-flex flex-column mb-0 w-100"},Ht={class:"d-flex align-items-center justify-content-start"},Jt={class:"d-flex align-items-center"},Kt=t("b",{class:"mr-8 text-right",style:{width:"30px"}},"Sort:",-1),Qt=t("div",{class:"flex-grow-1 justify-content-end d-flex"},[t("a",{href:"/admin/project/create",class:"btn btn-primary mr-2 ml-auto"},"Add Initiative"),t("button",{class:"btn btn-success mr-2"},"Import Initiatives"),t("a",{href:"/admin/organisation/export",class:"btn btn-info"},"Export All Initiative Data")],-1),Wt={class:"d-flex align-items-center flex-column flex-md-row mt-4"},Xt=t("b",{class:"mr-8",style:{width:"30px"}},"Filters:",-1),Yt={class:"flex-grow-1"},Zt={class:"d-flex justify-content-end align-items-center mt-3"},te={class:"d-flex align-items-center"},ee={class:"font-sm"},se={__name:"InitiativesList",props:{organisation:Object,initiatives:Object,hasAdditionalAssessment:Boolean},setup(e){const l=e,m=d([{id:"created_at",label:"Date added"},{id:"name",label:"Name"},{id:"budget",label:"Budget"}]),v=d("name"),o=d(1),h=(s,i)=>(n,p)=>n[s]===p[s]?0:n[s]<p[s]?-i:i;S(o,s=>{l.initiatives.sort(h(v.value,s))}),S(v,s=>{console.log("hi"),l.initiatives.sort(h(s,o.value))});const r=d(""),_=d(""),f=d(""),V=I(()=>l.initiatives.map(s=>s.portfolio.name).reduce((s,i)=>(s.includes(i)||s.push(i),s),[])),E=d([{label:"Not Started",value:"Not Started"},{label:"In Progress",value:"In Progress"},{label:"Complete",value:"Complete"},{label:"Failed",value:"Failed"}]);function $(s){return E.value.map(i=>({value:i.value,label:s+" - "+i.label}))}const C=I(()=>l.initiatives.filter(s=>r.value?s.latest_assessment.redline_status===r.value.value:!0).filter(s=>_.value?s.latest_assessment.principle_status===_.value.value:!0).filter(s=>f.value?s.portfolio.name===f.value:!0).filter(s=>w.value!==""?s.name.toLowerCase().includes(w.value.toLowerCase()):!0));function F(){}B(()=>{const s=window.location.search.substring(1),i=new URLSearchParams(s);console.log(i),i.forEach((n,p)=>{p==="portfolio"&&(f.value=n)})});const w=d("");return(s,i)=>(c(),u(j,null,[t("div",Mt,[t("h1",qt,a(e.organisation.name)+" - Initiatives ",1)]),t("div",zt,[t("div",Gt,[t("div",Ht,[t("div",Jt,[Kt,g(y(A),{style:{width:"150px"},modelValue:v.value,"onUpdate:modelValue":i[0]||(i[0]=n=>v.value=n),options:m.value,reduce:n=>n.id,clearable:!1},null,8,["modelValue","options","reduce"]),t("h3",{class:"my-0 mx-4 btn btn-outline-info",onClick:i[1]||(i[1]=n=>o.value=-o.value)},[t("i",{class:b(["la",o.value===1?"la-arrow-up":"la-arrow-down"])},null,2),L(" Sort "+a(o.value===1?"Ascending":"Descending"),1)])]),Qt]),t("div",Wt,[Xt,g(y(A),{style:{width:"250px"},class:"mr-4 mb-3 mb-md-0",modelValue:r.value,"onUpdate:modelValue":i[2]||(i[2]=n=>r.value=n),options:$("Redlines"),placeholder:"Filter By Redline Status",clearable:!0},null,8,["modelValue","options"]),g(y(A),{style:{width:"250px"},class:"mr-4",modelValue:_.value,"onUpdate:modelValue":i[3]||(i[3]=n=>_.value=n),options:$("Principles"),placeholder:"Filter By Assessment Status",clearable:!0},null,8,["modelValue","options"]),g(y(A),{style:{width:"350px"},class:"mr-4",modelValue:f.value,"onUpdate:modelValue":i[4]||(i[4]=n=>f.value=n),options:V.value,placeholder:"Filter By Portfolio",clearable:!0},null,8,["modelValue","options"]),t("div",Yt,[O(t("input",{style:{"min-width":"250px"},class:"form-control",placeholder:"Search Initiatives By Name","onUpdate:modelValue":i[5]||(i[5]=n=>w.value=n)},null,512),[[D,w.value]])])]),t("div",Zt,[t("div",te,[t("div",ee,"Showing 1 to "+a(C.value.length)+" of "+a(C.value.length)+" entries",1),t("button",{class:"btn btn-link",onClick:F},"Reset")])])])]),(c(!0),u(j,null,P(C.value,n=>(c(),U(Tt,{key:n.id,initiative:n,"has-additional-assessment":e.hasAdditionalAssessment},null,8,["initiative","has-additional-assessment"]))),128))],64))}};N().component("InitiativesList",se).mount("#initiativesListPage");
