window.spiderChart=function(f,c,d){var a={w:600,h:600,margin:{top:20,right:20,bottom:20,left:20},levels:3,maxValue:0,labelFactor:1.3,wrapWidth:80,opacityArea:.35,dotRadius:4,opacityCircles:.1,strokeWidth:2,roundStrokes:!1,color:d3.scale.category10()};if(typeof d<"u")for(var y in d)typeof d[y]<"u"&&(a[y]=d[y]);var i=Math.max(a.maxValue,d3.max(c,function(t){return d3.max(t.map(function(e){return e.value}))})),m=c[0].map(function(t,e){return t.axis}),P=m.length,h=Math.min(a.w/2,a.h/2),w=d3.format(""),r=Math.PI*2/P,l=d3.scale.linear().range([0,h]).domain([0,i]);d3.select(f).select("svg").remove();var D=d3.select(f).append("svg").attr("width",a.w+a.margin.left+a.margin.right).attr("height",a.h+a.margin.top+a.margin.bottom).attr("class","radar"+f),s=D.append("g").attr("transform","translate("+(a.w/2+a.margin.left)+","+(a.h/2+a.margin.top)+")"),M=s.append("defs").append("filter").attr("id","glow");M.append("feGaussianBlur").attr("stdDeviation","2.5").attr("result","coloredBlur");var C=M.append("feMerge");C.append("feMergeNode").attr("in","coloredBlur"),C.append("feMergeNode").attr("in","SourceGraphic");var x=s.append("g").attr("class","axisWrapper");x.selectAll(".levels").data(d3.range(1,a.levels+1).reverse()).enter().append("circle").attr("class","gridCircle").attr("r",function(t,e){return h/a.levels*t}).style("fill","#CDCDCD").style("stroke","#CDCDCD").style("fill-opacity",a.opacityCircles).style("filter","url(#glow)"),x.selectAll(".axisLabel").data(d3.range(1,a.levels+1).reverse()).enter().append("text").attr("class","axisLabel").attr("x",4).attr("y",function(t){return-t*h/a.levels}).attr("dy","0.4em").style("font-size","10px").attr("fill","#737373").text(function(t,e){return w(i*t/a.levels)});var A=x.selectAll(".axis").data(m).enter().append("g").attr("class","axis");A.append("line").attr("x1",0).attr("y1",0).attr("x2",function(t,e){return l(i*1.1)*Math.cos(r*e-Math.PI/2)}).attr("y2",function(t,e){return l(i*1.1)*Math.sin(r*e-Math.PI/2)}).attr("class","line").style("stroke","white").style("stroke-width","2px"),A.append("text").attr("class","legend").style("font-size","11px").attr("text-anchor","middle").attr("dy","0.35em").attr("x",function(t,e){return l(i*a.labelFactor)*Math.cos(r*e-Math.PI/2)}).attr("y",function(t,e){return l(i*a.labelFactor)*Math.sin(r*e-Math.PI/2)}).text(function(t){return t}).call(S,a.wrapWidth);var v=d3.svg.line.radial().interpolate("linear-closed").radius(function(t){return l(t.value)}).angle(function(t,e){return e*r});a.roundStrokes&&v.interpolate("cardinal-closed");var g=s.selectAll(".radarWrapper").data(c).enter().append("g").attr("class","radarWrapper");g.append("path").attr("class","radarArea").attr("d",function(t,e){return v(t)}).style("fill",function(t,e){return a.color(e)}).style("fill-opacity",a.opacityArea).on("mouseover",function(t,e){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",.1),d3.select(this).transition().duration(200).style("fill-opacity",.7)}).on("mouseout",function(){d3.selectAll(".radarArea").transition().duration(200).style("fill-opacity",a.opacityArea)}),g.append("path").attr("class","radarStroke").attr("d",function(t,e){return v(t)}).style("stroke-width",a.strokeWidth+"px").style("stroke",function(t,e){return a.color(e)}).style("fill","none").style("filter","url(#glow)"),g.selectAll(".radarCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarCircle").attr("r",a.dotRadius).attr("cx",function(t,e){return l(t.value)*Math.cos(r*e-Math.PI/2)}).attr("cy",function(t,e){return l(t.value)*Math.sin(r*e-Math.PI/2)}).style("fill",function(t,e,n){return a.color(n)}).style("fill-opacity",.8);var F=s.selectAll(".radarCircleWrapper").data(c).enter().append("g").attr("class","radarCircleWrapper");F.selectAll(".radarInvisibleCircle").data(function(t,e){return t}).enter().append("circle").attr("class","radarInvisibleCircle").attr("r",a.dotRadius*1.5).attr("cx",function(t,e){return l(t.value)*Math.cos(r*e-Math.PI/2)}).attr("cy",function(t,e){return l(t.value)*Math.sin(r*e-Math.PI/2)}).style("fill","none").style("pointer-events","all").on("mouseover",function(t,e){newX=parseFloat(d3.select(this).attr("cx"))-10,newY=parseFloat(d3.select(this).attr("cy"))-10,b.attr("x",newX).attr("y",newY).text(w(t.value)).transition().duration(200).style("opacity",1)}).on("mouseout",function(){b.transition().duration(200).style("opacity",0)});var b=s.append("text").attr("class","tooltip").style("opacity",0);function S(t,e){t.each(function(){for(var n=d3.select(this),L=n.text().split(/\s+/).reverse(),p,o=[],j=0,B=1.4,I=n.attr("y"),W=n.attr("x"),k=parseFloat(n.attr("dy")),u=n.text(null).append("tspan").attr("x",W).attr("y",I).attr("dy",k+"em");p=L.pop();)o.push(p),u.text(o.join(" ")),u.node().getComputedTextLength()>e&&(o.pop(),u.text(o.join(" ")),o=[p],u=n.append("tspan").attr("x",W).attr("y",I).attr("dy",++j*B+k+"em").text(p))})}};
