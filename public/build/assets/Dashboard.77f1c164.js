import{ad as V,f as a,A as t,I as i,ae as D,F as c,i as f,af as S,D as u,U as g,v as _,g as F,j,e as n,E as h,y as v}from"./vue.esm-bundler.b2fc0ee9.js";import{_ as U}from"./_plugin-vue_export-helper.cdc0426e.js";const q={props:{user:{type:Object,default:()=>{}},organisation:{type:Object,default:()=>{}},portfolios:{type:Object,default:()=>{}},regions:{type:Object,default:()=>{}},countries:{type:Object,default:()=>{}}},components:{},data(){return{formData:{},filteredCountries:[],enquireResult:null,status:"",message:"",statusSummary:null,redlinesSummary:null,yoursPrinciplesSummarySorted:null,othersPrinciplesSummarySorted:null}},mounted(){this.formData.portfolio=0,this.formData.organisation_id=this.organisation.id,this.formData.projectStartFrom="2020",this.formData.projectStartTo="2030",this.formData.budgetFrom="100000",this.formData.budgetTo="10000000",this.formData.sortBy=1},computed:{},watch:{},methods:{changeRegion(){this.formData.country="",this.filteredCountries=this.regions.filter(l=>l.id===this.formData.region)[0].countries},validateCriteria(){var l="";if(l+="Organisation: "+this.formData.organisation_id+`
`,l+="Portfolio: "+this.formData.portfolio+`
`,l+="Region: "+this.formData.region+`
`,l+="Country: "+this.formData.country+`
`,l+="projectStartFrom: "+this.formData.projectStartFrom+`
`,l+="projectStartTo: "+this.formData.projectStartTo+`
`,l+="budgetFrom: "+this.formData.budgetFrom+`
`,l+="budgetTo: "+this.formData.budgetTo+`
`,l+=`========== 
`,l+="chkRegion: "+this.formData.chkRegion+`
`,l+="chkCountry: "+this.formData.chkCountry+`
`,l+="chkProjectStart: "+this.formData.chkProjectStart+`
`,l+="chkBudget: "+this.formData.chkBudget+`
`,this.formData.portfolio==null){alert("Please select a portfolio");return}if(this.formData.chkRegion==!0&&this.formData.region==null){alert("Please select a region");return}if(this.formData.chkCountry==!0&&this.formData.country==null){alert("Please select a country");return}if(this.formData.chkProjectStart==!0&&this.formData.projectStartFrom==""||this.formData.projectStartTo==""){alert("Please fill in both Project Start From and Project Start To");return}if(this.formData.chkProjectStart==!0&&this.formData.projectStartFrom>this.formData.projectStartTo){alert("Project Start From should be smaller or equal to Project Start To");return}if(this.formData.chkBudget==!0&&this.formData.budgetFrom==""||this.formData.budgetTo==""){alert("Please fill in both Budget From and Budget To");return}if(this.formData.chkBudget==!0&&this.formData.budgetFrom>this.formData.budgetTo){alert("Budget From should be smaller or equal to Budget To");return}this.submitEnquiry()},showPrinciplesSummary(){for(var l=[],r,d=[],p=[],o=[],s=this.yoursPrinciplesSummarySorted.length-1;s>=0;s--)r=13-s,this.yoursPrinciplesSummarySorted[s].green!=0&&(l=[this.yoursPrinciplesSummarySorted[s].green,r],d.push(l)),l=[this.yoursPrinciplesSummarySorted[s].yellow,r],p.push(l),this.yoursPrinciplesSummarySorted[s].red!=0&&(l=[this.yoursPrinciplesSummarySorted[s].red,r],o.push(l));for(var m=[],e=[],P=[],s=this.othersPrinciplesSummarySorted.length-1;s>=0;s--)r=13-s,this.othersPrinciplesSummarySorted[s].green!=0&&(l=[this.othersPrinciplesSummarySorted[s].green,r],m.push(l)),l=[this.othersPrinciplesSummarySorted[s].yellow,r],e.push(l),this.othersPrinciplesSummarySorted[s].red!=0&&(l=[this.othersPrinciplesSummarySorted[s].red,r],P.push(l));var y=[];y[0]={label:"1.5 - 2",color:"#54C45E",data:d},y[1]={label:"0.5 - 1.5",color:"#FFE342",data:p},y[2]={label:"0 - 0.5",color:"#FF0000",data:o};var b=[];b[0]={label:"1.5 - 2",color:"#54C45E",data:m},b[1]={label:"0.5 - 1.5",color:"#FFE342",data:e},b[2]={label:"0 - 0.5",color:"#FF0000",data:P};for(var k=[],s=0;s<this.yoursPrinciplesSummarySorted.length;s++){var r=13-s;k.push([r,this.yoursPrinciplesSummarySorted[s].name])}var x=[[13,""],[12,""],[11,""],[10,""],[9,""],[8,""],[7,""],[6,""],[5,""],[4,""],[3,""],[2,""],[1,""]],w=!1,C=!0,T=250,B=0;this.plotWithOptions("#chart1",y,k,T,w,""),this.plotWithOptions("#chart2",b,x,B,C,"chart2Legend")},plotWithOptions(l,r,d,p,o,s){$.plot(l,r,{series:{stack:!0,lines:{show:!1,fill:!0,steps:!1},bars:{show:!0,barWidth:1,fill:.8,horizontal:!0,align:"center",numbers:{show:!1}}},xaxis:{show:!0,axisLabel:"% of Projects",tickLength:15,tickSize:50,tickFormatter:function(m,e){return m+"%"}},yaxis:{show:!0,tickLength:0,autoScale:"exact",ticks:d,labelWidth:p},grid:{borderWidth:1},legend:{show:o,container:document.getElementById(s)}})},submitEnquiry(){axios.post("/admin/generic-dashboard/enquire",this.formData).then(l=>{this.enquireResult=l.data,this.status=this.enquireResult.status,this.message=this.enquireResult.message,this.statusSummary=this.enquireResult.statusSummary,this.redlinesSummary=this.enquireResult.redlinesSummary,this.yoursPrinciplesSummarySorted=this.enquireResult.yoursPrinciplesSummarySorted,this.othersPrinciplesSummarySorted=this.enquireResult.othersPrinciplesSummarySorted,this.status!="0"?alert(this.message):window.setTimeout(this.showPrinciplesSummary,100)}).catch(l=>{l.response&&l.response.status})}}},L={class:"table table-bordered"},R=t("tr",null,[t("td",null,"Dashboard Filters")],-1),O=t("td",null,"Select Portfolio",-1),E=t("option",{value:"0"},"All Portfolios",-1),W=["value"],A={border:"1"},N=t("tr",null,[t("td",{colspan:"2"},"Geographic Filters"),t("td",null,"Other Filters")],-1),Y=["value"],z=t("td",null,null,-1),I=t("td",null,null,-1),M={align:"right"},H=t("td",null,null,-1),G=t("td",null,null,-1),J={align:"right"},K=["value"],Q=t("td",null,null,-1),X=t("td",null,null,-1),Z={align:"right"},tt=t("td",null,null,-1),et=t("td",null,null,-1),rt={align:"right"},ot=t("td",null,null,-1),lt={align:"center"},st=t("td",null,null,-1),at={key:0,class:"table"},nt=t("thead",{align:"center"},[t("th",null,"Initiatives"),t("th",null,"Number"),t("th",null,"%"),t("th",null,"Budget")],-1),it={align:"center"},ut={key:1,class:"table"},ht={align:"center"},dt=t("th",null,null,-1),mt={colspan:"2"},ct=t("thead",{align:"center"},[t("th",null,"Red Lines"),t("th",null,"Yours"),t("th",null,"Others")],-1),pt={align:"center"},ft={key:2,class:"table"},gt=t("thead",null,[t("th",null,"Principles")],-1),yt=t("option",{value:"1"},"Highest to Lowest",-1),bt=t("option",{value:"2"},"Lowest to Highest",-1),Dt=t("option",{value:"3"},"Default",-1),St=[yt,bt,Dt],_t={key:3,class:"table"},vt=t("th",{width:"38%"},null,-1),Pt=t("th",{width:"22%",align:"center"},[t("u",null,"Yours")],-1),kt={width:"28%"},Ft=t("u",null,"Others",-1),jt=t("th",{width:"12%"},null,-1),xt=t("tr",null,[t("td",{colspan:"2"},[t("div",{class:"demo-container-1"},[t("div",{id:"chart1",class:"demo-placeholder"})])]),t("td",null,[t("div",{class:"demo-container-2"},[t("div",{id:"chart2",class:"demo-placeholder"})])]),t("td",{valign:"top"},[t("br"),t("div",{id:"chart2Legend",class:"legend"})])],-1);function wt(l,r,d,p,o,s){const m=V("center");return n(),a(c,null,[t("table",L,[t("tr",null,[t("td",null,[t("table",null,[R,t("tr",null,[O,t("td",null,[i(t("select",{"onUpdate:modelValue":r[0]||(r[0]=e=>o.formData.portfolio=e)},[E,(n(!0),a(c,null,f(d.portfolios,e=>(n(),a("option",{value:e.id},h(e.name),9,W))),256))],512),[[D,o.formData.portfolio]])])])])])]),t("tr",null,[t("td",null,[t("table",A,[N,t("tr",null,[t("td",null,[t("label",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":r[1]||(r[1]=e=>o.formData.chkRegion=e)},null,512),[[S,o.formData.chkRegion]]),u(" Filter by Region")])]),t("td",null,[i(t("select",{"onUpdate:modelValue":r[2]||(r[2]=e=>o.formData.region=e),onChange:r[3]||(r[3]=(...e)=>s.changeRegion&&s.changeRegion(...e))},[(n(!0),a(c,null,f(d.regions,e=>(n(),a("option",{value:e.id},h(e.name),9,Y))),256))],544),[[D,o.formData.region]])]),t("td",null,[t("label",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":r[4]||(r[4]=e=>o.formData.chkProjectStart=e)},null,512),[[S,o.formData.chkProjectStart]]),u(" Filter by Project Start")])])]),t("tr",null,[z,I,t("td",M,[u("From "),i(t("input",{type:"number","onUpdate:modelValue":r[5]||(r[5]=e=>o.formData.projectStartFrom=e),min:"2020",max:"2100",style:{width:"80px"}},null,512),[[g,o.formData.projectStartFrom]])])]),t("tr",null,[H,G,t("td",J,[u("To "),i(t("input",{type:"number","onUpdate:modelValue":r[6]||(r[6]=e=>o.formData.projectStartTo=e),min:"2020",max:"2100",style:{width:"80px"}},null,512),[[g,o.formData.projectStartTo]])])]),t("tr",null,[t("td",null,[t("label",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":r[7]||(r[7]=e=>o.formData.chkCountry=e)},null,512),[[S,o.formData.chkCountry]]),u(" Filter by Country")])]),t("td",null,[i(t("select",{"onUpdate:modelValue":r[8]||(r[8]=e=>o.formData.country=e)},[(n(!0),a(c,null,f(o.filteredCountries,e=>(n(),a("option",{value:e.id},h(e.name),9,K))),256))],512),[[D,o.formData.country]])]),t("td",null,[t("label",null,[i(t("input",{type:"checkbox","onUpdate:modelValue":r[9]||(r[9]=e=>o.formData.chkBudget=e)},null,512),[[S,o.formData.chkBudget]]),u(" Filter by Budget")])])]),t("tr",null,[Q,X,t("td",Z,[u("From "),i(t("input",{type:"number","onUpdate:modelValue":r[10]||(r[10]=e=>o.formData.budgetFrom=e),min:"0",max:"10000000",step:"100000",style:{width:"100px"}},null,512),[[g,o.formData.budgetFrom]]),u(" EUR ")])]),t("tr",null,[tt,et,t("td",rt,[u("To "),i(t("input",{type:"number","onUpdate:modelValue":r[11]||(r[11]=e=>o.formData.budgetTo=e),min:"0",max:"10000000",step:"100000",style:{width:"100px"}},null,512),[[g,o.formData.budgetTo]]),u(" EUR ")])]),t("tr",null,[ot,t("td",lt,[i(t("input",{type:"hidden","onUpdate:modelValue":r[12]||(r[12]=e=>o.formData.organisation_id=e)},null,512),[[g,o.formData.organisation_id]]),t("button",{onClick:r[13]||(r[13]=(...e)=>s.validateCriteria&&s.validateCriteria(...e)),class:"btn btn-primary"},"Submit")]),st])])])])]),o.statusSummary!=null?(n(),a("table",at,[nt,t("tbody",null,[(n(!0),a(c,null,f(o.statusSummary,e=>(n(),a("tr",it,[t("td",null,h(e.status),1),t("td",null,h(e.number),1),t("td",null,h(e.percent),1),t("td",null,h(e.budget),1)]))),256))])])):_("",!0),o.redlinesSummary!=null?(n(),a("table",ut,[t("thead",ht,[dt,t("th",mt,[F(m,null,{default:j(()=>[u("% projects passed")]),_:1})])]),ct,t("tbody",pt,[(n(!0),a(c,null,f(o.redlinesSummary,e=>(n(),a("tr",null,[t("td",{class:v([e.yours==100?"table-success":"table-warning"])},h(e.name),3),t("td",{class:v([e.yours==100?"table-success":"table-warning"])},h(e.yours)+"%",3),t("td",{class:v([e.yours==100?"table-success":"table-warning"])},h(e.others)+"%",3)]))),256))])])):_("",!0),o.yoursPrinciplesSummarySorted!=null?(n(),a("table",ft,[gt,t("thead",null,[t("th",null,[u(" Sort by: "),i(t("select",{"onUpdate:modelValue":r[14]||(r[14]=e=>o.formData.sortBy=e),onChange:r[15]||(r[15]=(...e)=>s.validateCriteria&&s.validateCriteria(...e))},St,544),[[D,o.formData.sortBy]])])])])):_("",!0),o.yoursPrinciplesSummarySorted!=null?(n(),a("table",_t,[t("thead",null,[vt,Pt,t("th",kt,[F(m,null,{default:j(()=>[Ft]),_:1})]),jt]),xt])):_("",!0)],64)}const Bt=U(q,[["render",wt]]);export{Bt as D};
